<<<<<<< HEAD
<tool id="Peptide_sequence_analysis" name="Peptide sequence analysis" version="1.1.2">
  <description>Peptide sequence analysis</description>
=======
<tool id="modlamp_analysis" name="modlamp analysis" version="1.1.2">
  <description></description>
>>>>>>> 694aebdf2cb580aa13d0e0d0f2e1330c705a9f9f
  <requirements>
    <requirement type="package" version="1.0.5">pandas</requirement>
    <requirement type="package" version="4.2.1">modlamp</requirement> 
  </requirements>
  <stdio>
    <exit_code range="1" level="fatal" />
  </stdio>
    <command detect_errors="exit_code"><![CDATA[


        python '$__tool_directory__/modlamp_analysis.py'  '$SelAnalysis.Analysis'

                        #if $SelAnalysis.Analysis == 'CalcAAFreq'
                            --InFile $SelAnalysis.input1
                            --htmlOutDir '$output2.extra_files_path'
                            --htmlFname '$output2'
                            --OutFile '$output1'
                        #end if 

                        #if $SelAnalysis.Analysis == 'H'
                            --InFile $SelAnalysis.input1
                            --Scale $SelAnalysis.scale
                            --OutFile '$output1'                            
                        #end if 

                        #if $SelAnalysis.Analysis == 'uH'
                            --InFile $SelAnalysis.input1
                            --Scale $SelAnalysis.Scale
                            --Window $SelAnalysis.Window
                            --Angle $SelAnalysis.Angle
                            --Modality $SelAnalysis.Modality
                            --OutFile '$output1'
                        #end if 

                        #if $SelAnalysis.Analysis == 'charge'
                            --InFile $SelAnalysis.input1
                            --ph $SelAnalysis.ph
                            --Amide $SelAnalysis.amide
                            --OutFile '$output1'

                        #end if 

                        #if $SelAnalysis.Analysis == 'Len'
                            --InFile $SelAnalysis.input1
                            --OutFile '$output1'
                        #end if 

                        #if $SelAnalysis.Analysis == 'PlotSummary'
                            --InFile1 $SelAnalysis.input1
                            --InFile2 $SelAnalysis.input2
                            --htmlOutDir '$output2.extra_files_path'
                            --htmlFname '$output2'
                        #end if                       
    ]]></command>


  <inputs>

    <conditional name='SelAnalysis' >

        <param name="Analysis" type="select" label="MLAlgo" argument="">
          <option value="CalcAAFreq">Calculate amino acide frequency</option>
          <option value="H">Calculate global hydrophobicity</option>
          <option value="uH">Calculating hydrophobic moments</option>
          <option value="charge">Calculate the total molecular charge</option>
          <option value="Len">Calculate sequence length</option>
          <option value="PlotSummary">Plot Summary</option>
        </param>

        <when value="CalcAAFreq">
            <param name="input1" type="data" format="fasta" argument= "--InFile"/>
        </when>

        <when value="H">
            <param name="input1" type="data" format="fasta" argument= "--InFile"/>
            <param name="scale" type="text" value="eisenberg" label="hydrophobicity scale" help="See syntax below"/>
        </when>

        <when value="uH">
            <param name="input1" type="data" format="fasta" argument= "--InFile"/>
            <param name="Scale" type="text" value="eisenberg" label="hydrophobicity scale" help="See syntax below"/>
            <param name="Window" type="integer" label="Window" value="1000" help="--Window" />
            <param name="Angle" type="integer" label="Angle" value="100" help="--Angle" />
            <param name="Modality" type="select"  label="hydrophobicity scale" help="--Modality">
                <option value="max" >Max</option> 
                <option value="mean">Mean</option> 
            </param>

        </when>

        <when value="charge">
            <param name="input1" type="data" format="fasta" argument= "--InFile"/>
            <param name="ph" type="float" label="ph" value="7.0"  help="--ph" />
            <param name="amide" type="boolean" label="amide" value="true" help="--Amide" />
        </when>

        <when value="Len">
            <param name="input1" type="data" format="fasta" argument= "--InFile"/>
        </when>

        <when value="PlotSummary">
            <param name="input1" type="data" format="fasta" argument= "--InFile1"/>
            <param name="input2" type="data" format="fasta" argument= "--InFile2"/>
        </when>
    </conditional>
  </inputs>


  <outputs>
        <data name='output1' format='tabular' label="out.tsv" > 
            <filter>SelAnalysis['Analysis'] != "PlotSummary"</filter>
        </data>


        <data name='output2' format='html' label="report.html" >
             <filter>SelAnalysis['Analysis'] != "H"</filter>
             <filter>SelAnalysis['Analysis'] != "uH"</filter>
             <filter>SelAnalysis['Analysis'] != "charge"</filter>
             <filter>SelAnalysis['Analysis'] != "Len"</filter>
        </data>

  </outputs>
  <tests>
    <test>
      <param name="input" value="1.bed"/>
      <param name="cond" value="c2"/>
      <output name="out_file1" file="gsummary_out1.tabular"/>
    </test>
  </tests>
  <help>

  </help>
</tool>



