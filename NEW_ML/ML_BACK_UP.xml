<tool id="NEW_ML" name="NEW_ML" version="0.1.0" python_template_version="3.5">
    <requirements>
      <requirement type="package" version="2.2">matplotlib</requirement>
      <requirement type="package" version="1.2.1">scipy</requirement>
      <requirement type="package" version="2.7">python</requirement>
      <requirement type="package" version="0.24.2">pandas</requirement>
      <requirement type="package" version="0.20.0">scikit-learn</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[

        python '$__tool_directory__/ML.py' '$MLAlgo' --TrainFile '$input1' --TestMethod '$TestMethod' --SelectedSclaer '$Scalling_option' --htmlOutDir '$output2.extra_files_path' --OutFile '$output1'
 
    ]]></command>

    <inputs>

      <conditional name="Algo_select">
     
        <param name="MLAlgo" type="select" label="MLAlgo" argument="">
          <option value="SVMC">SVMC</option>
          <option value="SGDC">SGDC</option>
          <option value="DTC">DTC</option>
          <option value="GBC">GBC</option>
          <option value="RFC">RFC</option>
          <option value="LRC">LRC</option>
          <option value="KNC">KNC</option>
          <option value="GNBC">GNBC</option>
        </param>

        <when value= 'SVMC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">Program defaults.</option>
                <option value="advanced">Full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>

        <when value= 'SGDC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>


        <when value= 'DTC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>


        <when value= 'GBC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>


        <when value= 'RFC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>

        <when value= 'LRC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>

        <when value= 'KNC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>

        <when value= 'GNBC'>

          <conditional name="settings">
            <param name="advanced" type="select" label="Hyper Perameters">
                <option value="simple" selected="true">No, use program defaults.</option>
                <option value="advanced">Yes, see full parameter list.</option>
            </param>

            <when value="simple">
            </when>

            <when value="advanced">
              <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
            </when>
          </conditional>
        </when>

      </conditional>

      <param name="input1" type="data" format="tsv" argument= "--TrainFile"/>

      <param name="Scalling_option" type="select" label="Scalling data" argument="--SelectedSclaer">
        <option value="Min_Max">Min_Max</option>
        <option value="Standard_Scaler">Standard_Scaler</option>
        <option value="No_Scaler">No_Scaler</option>
      </param>

      <conditional name="TestMethod">
        <param name="TestMethod_selector" type="select" label="Choose the Test method" argument="--TestMethod">
          <option value="Internal">Internal</option>
          <option value="TestSplit">TestSplit</option>
          <option value="External">External</option>
          <option value="Predict">Predict</option>
        </param>

        <when value="Internal">
            <param name="nFolds" type="integer" label="Mask" value="5" min="5" max="10" help="(-X)" />
        </when>
        <when value="TestSplit">
            <param name="nFolds" type="float" label="Mask" value="0.2" min="0.0" max="1.0" help="(-X)" />
        </when>
        <when value="External">
            <param name="input1" type="data" format="tsv"  argument="--TestFile"/>
        </when>
        <when value="Predict">
            <param name="input1" type="data" format="tsv" argument="--TestFile"/>
        </when>
      </conditional>

    </inputs>

    <outputs>
        <data name='output1' format='tsv' label="out.tsv" />    
        <data name='output2' format='html' label="repot.html" />
    </outputs>

    <tests>
        <test>
            <param name="input1" value="1.csv"/>
            <output name="output1" file="out.csv" />
        </test>
    </tests>


    <help><![CDATA[
        usage: ML_algo.py [-h] -f FILE_NAME [-n N_FOLDS] [-w WORK_DIR_PATH] -o
                  OUT_FILE_NAME
optional arguments:
  -h, --help            show this help message and exit
  -f FILE_NAME, --file_name FILE_NAME
                        Path to target CSV file
  -n N_FOLDS, --n_folds N_FOLDS
                        n_folds for Cross Validation
  -w WORK_DIR_PATH, --Work_dir_path WORK_DIR_PATH
                        n_folds for Cross Validation
  -o OUT_FILE_NAME, --out_file_name OUT_FILE_NAME
                        Path to out file
    ]]></help>
    <citations>
        <citation type="bibtex">
@misc{githubseqtk,
  author = {LastTODO, FirstTODO},
  year = {TODO},
  title = {seqtk},
  publisher = {GitHub},
  journal = {GitHub repository},
  url = {https://github.com/lh3/seqtk},

}</citation>
    </citations>
</tool>